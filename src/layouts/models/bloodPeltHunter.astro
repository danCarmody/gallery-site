---
import { getCollection } from "astro:content";

export async function getStaticPaths () {
    const models = await getCollection("models");
    return models.map((model) => ({
        params: {slug: model.slug},
        props: { model }
    }))
}

const { model } = Astro.props;
const { Content } = await model.render();
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title> {model.data.title}</title>
    </head>

    <body class="bg-zinc-950 text-zinc-100">
        <main class="max-w-3x1 mx-auto px-6 py-12">
            <a href="/gallery" class="text-zinc-400 hover:text-zinc-200">Back To Gallery</a>

            <h1 class="text-3x1 font-semibold mt-6">{model.data.title}</h1>
            <div class="text-zinc-400 mt-2">
                {[model.data.system, model.data.faction].filter(Boolean).join(" | ")}
            </div>

            <img 
                src={model.data.coverImage}
                alt={model.data.title}
                class="rounded-2x1 mt-8 w-full"
            />

            {model.data.galleryImage?.length > 0 && (
                <div class="grid grid-cols-2 gap-4 mt-6">
                    {model.data.galleryImage(((img) => (
                        <img src={img} alt=" " class="rounded-x1" loading="lazy" />
                    ))}
                </div>
            )}

            <article class="prose prose-invert mt-10 max-2-none">
                <content />
            </article>
        </main>
    </body>
</html>
---
import { getCollection } from "astro:content";

const models = await getCollection("models");
const sorted = models.sort((a,b) => (b.data.date?.getTime() ?? 0 ) - (a.data.date?.getTime() ?? 0));
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Gallery</title>
    </head>

    <body class="bg-zinc-950 text-zinc-100">
        <main class="max-w-6x1 mx-auto px-6 py-12">
            <h1 class="text-3x1 font-semibold mb-8">Gallery</h1>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                {sorted.map((model) => (
                    <a 
                        href={`/models/${model.slug}`}
                        class="group rounded-x1 overflow-hidden bg-zinc-900/40 hover:bg-zinc-900/70 transition"
                    >
                        <img
                            src={model.data.coverImage}
                            alt={model.data.title}
                            loading="lazy"
                            class="aspect-square w-full object-cover group-hover:scale-[1.02] transition"
                        />
                        <diiv class="p-3">
                            <div class="font-medium">{model.data.title}</div>
                            <dic class="text-sm text-zinc-400">
                                {[model.data.system, model.data.faction].filter(Boolean).join(" -- ")}
                            </dic>
                        </diiv>
                    </a>
                ))}
            </div>
        </main>
    </body>
</html>